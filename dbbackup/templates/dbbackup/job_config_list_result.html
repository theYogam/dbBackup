{% load i18n humanize staticfiles admin_list %}
{% include 'core/snippets/spinner.html' %}
<div class="col-md-9 col-md-offset-1">
    <ul class="object-list list-group">
        {% for obj in objects_page.object_list %}
            {% url 'dbbackup:change_jobconfig' obj.id as obj_url %}
            <li class="ik-li list-group-item {{ obj.status }}" id="{{ obj.id }}" data-id="{{ obj.id }}" style="border: none;">
                <a href="{{ obj_url }}">
                    <div class="event">
                        <div class="subtle-shade event-detail">
                            <div class="event-icon pull-left">
                                <img src="{% static 'dbbackup/img/isometric-cloud-computing-concept-represented-by-a-server-with-a-vector-id969567772.jpg' %}" />
                            </div>
                            <div class="event-content">
                                <div>
                                    <b href="javascript;" class="col-sm-6 row" style="font-size: 1.2em">{% trans 'Hostname' %}</b>
                                    <div class="col-sm-4 event-date text-muted pull-right text-right" style="padding-right: 0;">{{ obj.hostname }}</div>
                                    <div class="clearfix"></div>
                                </div>
                                <div>
                                    <b href="javascript;" class="col-sm-6 row" style="font-size: 1.2em">{% trans 'Database type' %}</b>
                                    <div class="col-sm-4 event-date text-muted pull-right text-right" style="padding-right: 0;">{{ obj.db_type }}</div>
                                    <div class="clearfix"></div>
                                </div>
                                <div>
                                    <b href="javascript;" class="col-sm-6 row" style="font-size: 1.2em">{% trans 'Database name' %}</b>
                                    <div class="col-sm-4 event-date text-muted pull-right text-right" style="padding-right: 0;">{{ obj.db_name }}</div>
                                    <div class="clearfix"></div>
                                </div>
                                <div>
                                    <b href="javascript;" class="col-sm-6 row" style="font-size: 1.2em">{% trans 'Run every' %}</b>
                                    <div class="col-sm-4 event-date text-muted pull-right text-right" style="padding-right: 0;">{{ obj.run_every }} hours</div>
                                    <div class="clearfix"></div>
                                </div>
                                <div>
                                    <b href="javascript;" class="col-sm-6 row" style="font-size: 1.2em">{% trans 'Saved on' %}</b>
                                    <div class="col-sm-4 event-date text-muted pull-right text-right" style="padding-right: 0; color: mediumblue; font-weight: bolder">{{ obj.created_on }}</div>
                                    <div class="clearfix"></div>
                                </div>
                                {% for destination_server in obj.destination_server_list %}
                                    <div>
                                        <b href="javascript;" class="col-sm-6 row" style="font-size: 1.2em">{% trans 'Destination server' %}{{ forloop.counter }}</b>
                                        <div class="col-sm-4 event-date text-muted pull-right text-right" style="padding-right: 0;">{{ destination_server }}</div>
                                        <div class="clearfix"></div>
                                    </div>
                                {% endfor %}
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </a>
                {% with obj_details=obj.get_obj_details %}
                    {% if obj_details %}
                        <div class="text-muted">{{ obj_details }}</div>
                    {% endif %}
                {% endwith %}
                <div class="actions">
                    {% if has_is_active_field %}
                        {% if obj.is_active %}
                            <i class="action glyphicon glyphicon-ok toggle active off" title="{% trans "Deactivate" %}"></i>
                        {% else %}
                            <i class="action glyphicon glyphicon-ok toggle active on" title="{% trans "Activate" %}"></i>
                        {% endif %}
                    {% endif %}
                    <i class="glyphicon glyphicon-trash trash" title="{% trans "Delete item" %}"></i>
                </div>
            </li>
        {% endfor %}
    </ul>
    {% if objects_page.paginator.num_pages > 1 %}
    <ul class="pagination container-fluid">
        <li class="disabled" data-val="first"><a href="javascript:;" aria-label="Previous"><span aria-hidden="true">«</span></a></li>
        {% for page in page_range %}
            <li class="page{% if page == objects_page.number %} active{% endif %}" data-val="{{ page }}">
                <a href="javascript:;">
                    {{ page }} {% if page == objects_page.number %}<span class="sr-only">(current)</span>{% endif %}
                </a>
            </li>
        {% endfor %}
        <li data-val="-1"><a href="javascript:;" aria-label="Next"><span aria-hidden="true">»</span></a></li>
    </ul>
    {% endif %}
    <div id="page-navigation" class="text-muted container-fluid">
        {% if objects_page.paginator.num_pages > 1 %}
            <p>{% blocktrans with count=objects_page.paginator.count start=objects_page.start_index end=objects_page.end_index %}
                {{ start }} – {{ end }} of {{ count }} results{% endblocktrans %}</p>
        {% else %}
            <p>{% blocktrans with count=objects_page.paginator.count %}{{ count }} results{% endblocktrans %}</p>
        {% endif %}
    </div>
</div>
